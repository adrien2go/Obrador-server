<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 6.4.7.2 (Linux)"/>
	<meta name="created" content="2017-01-01T14:28:30.863048091"/>
	<meta name="changed" content="00:00:00"/>
	<style type="text/css">
		@page { size: 21.59cm 27.94cm; margin: 2cm }
		p { margin-bottom: 0.25cm; line-height: 120%; background: transparent }
		h1 { margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h1.western { font-family: "Liberation Sans", sans-serif; font-size: 18pt; font-weight: bold }
		h1.cjk { font-family: "Noto Sans CJK SC Regular"; font-size: 18pt; font-weight: bold }
		h1.ctl { font-family: "FreeSans"; font-size: 18pt; font-weight: bold }
		h2 { margin-top: 0.35cm; margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h2.western { font-family: "Liberation Sans", sans-serif; font-size: 16pt; font-weight: bold }
		h2.cjk { font-family: "Noto Sans CJK SC Regular"; font-size: 16pt; font-weight: bold }
		h2.ctl { font-family: "FreeSans"; font-size: 16pt; font-weight: bold }
		h3 { margin-top: 0.25cm; margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h3.western { font-family: "Liberation Sans", sans-serif; font-size: 14pt; font-weight: bold }
		h3.cjk { font-family: "Noto Sans CJK SC Regular"; font-size: 14pt; font-weight: bold }
		h3.ctl { font-family: "FreeSans"; font-size: 14pt; font-weight: bold }
		a:link { color: #000080; so-language: zxx; text-decoration: underline }
		a:visited { color: #800000; so-language: zxx; text-decoration: underline }
	</style>
</head>
<body lang="en-US" link="#000080" vlink="#800000" dir="ltr">
<div title="header"><p align="center" style="margin-bottom: 0.5cm; line-height: 100%">
	<font face="Ubuntu">Formation Admin System v1.0</font></p>
</div>
<div id="Table des matières1" dir="ltr">
	<div id="Table des matières1_Head" dir="ltr"><p style="margin-top: 0.42cm; margin-bottom: 0.21cm; line-height: 100%; page-break-after: avoid">
		<font face="Liberation Sans, sans-serif"><font size="4" style="font-size: 16pt"><b>Table
		des matières</b></font></font></p>
	</div>
	<p style="margin-bottom: 0cm; line-height: 100%"><a href="#__RefHeading___Toc151_1033052965">1.
	Introduction	2</a></p>
	<p style="margin-bottom: 0cm; line-height: 100%"><a href="#__RefHeading___Toc127_1033052965">2.
	Découverte du Shell Unix	2</a></p>
	<p style="margin-left: 0.5cm; margin-bottom: 0cm; line-height: 100%">
	<a href="#__RefHeading___Toc129_1033052965">1. Qu’est-ce que c’est
	?	2</a></p>
	<p style="margin-left: 0.5cm; margin-bottom: 0cm; line-height: 100%">
	<a href="#__RefHeading___Toc365_3842791473">2. Redirections des
	ports vers les services concernés.	2</a></p>
	<p style="margin-left: 1cm; margin-bottom: 0cm; line-height: 100%"><a href="#__RefHeading___Toc153_1033052965">1.
	Si pas de Box internet.	2</a></p>
	<p style="margin-left: 1cm; margin-bottom: 0cm; line-height: 100%"><a href="#__RefHeading___Toc367_3842791473">2.
	Avec une box internet	3</a></p>
	<p style="margin-bottom: 0cm; line-height: 100%"><a href="#__RefHeading___Toc247_1033052965">3.
	Création d’un conteneur (container) Proxmox avec Wordpress à
	l’intérieur.	3</a></p>
	<p style="margin-left: 0.5cm; margin-bottom: 0cm; line-height: 100%">
	<a href="#__RefHeading___Toc249_1033052965">1. Qu’est-ce qu’un
	conteneur ?	3</a></p>
	<p style="margin-left: 0.5cm; margin-bottom: 0cm; line-height: 100%">
	<a href="#__RefHeading___Toc251_1033052965">2. Installons notre
	‘Proxy’, en conteneur Proxmox.	4</a></p>
</div>
<p lang="fr-FR" style="margin-bottom: 0cm; line-height: 100%"><br/>

</p>
<h1 class="western" style="page-break-before: always"><a name="__RefHeading___Toc151_1033052965"></a>
1.<font face="Ubuntu"><span lang="fr-FR">I</span></font><font face="Ubuntu"><span lang="fr-FR">ntroduction</span></font></h1>
<p><font face="Ubuntu"><span lang="fr-FR">Dans ce document nous
allons utiliser l’OS Proxmox v7.4 pour gérer notre serveur
WEB.<br/>
Nous allons découvrir le ‘Shell Unix’ pour l’édition
de fichiers de configuration</span></font><font face="Ubuntu"><span lang="fr-FR">s</span></font><font face="Ubuntu"><span lang="fr-FR">,
puis l’interface WEB d’Administration de Proxmox pour
l’administration et la gestion des services du serveur. </span></font><font face="Ubuntu"><span lang="fr-FR">Dans
cette section nous verrons brièvement les interfaces réseaux
(redirection des ports de notre serveur).</span></font></p>
<p><font face="Ubuntu"><span lang="fr-FR">N</span></font><font face="Ubuntu"><span lang="fr-FR">ous
verrons dans un second temps le principe de ‘conteneurs’ de
Proxmox et de docker (Logiciel qui permet de créer des ‘conteneurs’
tout comme Proxmox, mais à l’intérieur d’un conteneur Proxmox).</span></font></p>
<h1 class="western"><a name="__RefHeading___Toc127_1033052965"></a>2.<font face="Ubuntu"><span lang="fr-FR">Découverte
du </span></font><font face="Ubuntu"><span lang="fr-FR">S</span></font><font face="Ubuntu"><span lang="fr-FR">hell
</span></font><font face="Ubuntu"><font size="5" style="font-size: 18pt"><span lang="fr-FR"><b>Unix</b></span></font></font></h1>
<h2 class="western"><a name="__RefHeading___Toc129_1033052965"></a>1.<font face="Ubuntu"><span lang="fr-FR">Qu’est-ce
que c’est ?</span></font></h2>
<p><font face="Ubuntu"><span lang="fr-FR">Un </span></font><font face="Ubuntu"><span lang="fr-FR"><b>shell
Unix</b></span></font><font face="Ubuntu"><span lang="fr-FR"> est un
</span></font><a href="https://fr.wikipedia.org/wiki/Interpr%C3%A9teur_de_commandes">interpréteur
de commandes</a><font face="Ubuntu"><span lang="fr-FR"> destiné aux
</span></font><a href="https://fr.wikipedia.org/wiki/Syst%C3%A8mes_d%27exploitation">systèmes
d'exploitation</a><font face="Ubuntu"><span lang="fr-FR"> </span></font><a href="https://fr.wikipedia.org/wiki/Unix">Unix</a><font face="Ubuntu"><span lang="fr-FR">
et de </span></font><a href="https://fr.wikipedia.org/wiki/Type_Unix">type
Unix</a><font face="Ubuntu"><span lang="fr-FR"> qui permet d'accéder
aux fonctionnalités internes du système d'exploitation. (Définition
de Wikipédia).<br/>
</span></font><font face="Ubuntu"><span lang="fr-FR">Cela
va nous permettre d’ouvrir </span></font><font face="Ubuntu"><span lang="fr-FR">(exécuter)</span></font><font face="Ubuntu"><span lang="fr-FR">
des logiciels afin d’éditer des fichiers textes mais aussi </span></font><font face="Ubuntu"><span lang="fr-FR">de
lancer</span></font><font face="Ubuntu"><span lang="fr-FR"> des
scripts Shell, afin d’exécuter une suite d’instructions (cela
permet d’automatiser une suite d’actions sur le serveur sans
devoir tout taper à la main à chaque fois dans le terminal).</span></font></p>
<h2 class="western"><a name="__RefHeading___Toc365_3842791473"></a>2.<font face="Ubuntu"><font size="5" style="font-size: 16pt"><span lang="fr-FR"><b>R</b></span></font></font><font face="Ubuntu"><font size="5" style="font-size: 16pt"><span lang="fr-FR"><b>edirections
des ports vers les services concernés.</b></span></font></font></h2>
<h3 class="western"><a name="__RefHeading___Toc153_1033052965"></a>1.<font face="Ubuntu"><font size="5" style="font-size: 16pt"><span lang="fr-FR"><b>Si
pas de Box internet</b></span></font></font><font face="Ubuntu"><span lang="fr-FR">.</span></font></h3>
<p><font face="Ubuntu"><span lang="fr-FR">O</span></font><font face="Ubuntu"><span lang="fr-FR">n
va éditer le fichier de redirections des ports de Proxmox vers les
‘conteneurs’</span></font></p>
<ul>
	<li><p><font face="Ubuntu"><span lang="fr-FR">O</span></font><font face="Ubuntu"><span lang="fr-FR">uvrir
	un terminal </span></font><font face="Ubuntu"><span lang="fr-FR">ou
	ouvrir votre navigateur à l’adresse du serveur.</span></font></p>
	<li><p><font face="Ubuntu"><span lang="fr-FR">S</span></font><font face="Ubuntu"><span lang="fr-FR">e
	connecter au serveur&nbsp;:<br/>
Via SSH par terminal ou via
	l’interface Web du serveur.<br/>
Si connecté via le Web,
	</span></font><font face="Ubuntu"><span lang="fr-FR">sélectionner
	le ‘PVE’, puis </span></font><font face="Ubuntu"><span lang="fr-FR">ouvrir
	</span></font><font face="Ubuntu"><span lang="fr-FR">l’interface</span></font><font face="Ubuntu"><span lang="fr-FR">
	‘&gt;_Shell’ → ‘noVNC’ </span></font><font face="Ubuntu"><span lang="fr-FR">(terminal
	via le Web),<br/>
</span></font><font face="Ubuntu"><span lang="fr-FR">Vous
	êtes maintenant connecté au serveur.</span></font></p>
	<li><p><font face="Ubuntu"><span lang="fr-FR">T</span></font><font face="Ubuntu"><span lang="fr-FR">apez
	</span></font><font color="#ffffff"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #000000">pwd</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">
	</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">pour
	afficher l’emplacement actuel dans l’arborescence de votre
	disque dur.</span></span></font></font></p>
	<li><p><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">T</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">apez
	</span></span></font></font><font color="#ffffff"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #000000">nano
	/etc/network/interfaces</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">
	</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">ceci
	va </span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">lancer
	le logiciel ‘nano’ qui permet d’éditer des fichiers en ligne
	de commande.</span></span></font></font></p>
	<li><p><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">Ici
	nous voulons ajouter des redirections de ports vers l’un de nos
	‘conteneurs’<br/>
</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">Avec
	‘ctrl+k’ vous allez coupez des lignes et avec ‘ctrl+u’ vous
	allez les coller.<br/>
Avec ‘ctrl+x’ vous allez quitter ‘nano’
	tout en enregistrant les
	modifications.<br/>
<a href="https://fr.wikipedia.org/wiki/Port_(logiciel">https://fr.wikipedia.org/wiki/Port_(logiciel</a>)</span></span></font></font></p>
</ul>
<h3 class="western"><a name="__RefHeading___Toc367_3842791473"></a>2.<font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">A</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">vec
une box internet</span></span></font></font></h3>
<p><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">C</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">ela
diffère grandement dans l’interface pour chaque Box de chaque
fournisseur, mais pas dans les principes.</span></span></font></font></p>
<ul>
	<li><p><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">Il
	faut se connecter à la box en admin et trouver la </span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">page
	des</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">
	redirection</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">s</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">
	des ports.</span></span></font></font></p>
	<li><p><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">Trouver
	les IPs des conteneurs</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">,
	s’il y a une liste, sinon les rentrer à la main</span></span></font></font><font color="#000000"><font face="Ubuntu"><span lang="fr-FR"><span style="background: #ffffff">
	et ajouter une redirection de port vers l’IP d’un des
	conteneurs. </span></span></font></font>
	</p>
</ul>
<h1 lang="fr-FR" class="western"><a name="__RefHeading___Toc247_1033052965"></a>
3.Création d’un conteneur (container) Proxmox avec Wordpress à
l’intérieur.</h1>
<p><font face="Ubuntu"><span lang="fr-FR">Dans ce </span></font><font face="Ubuntu"><span lang="fr-FR">chapitre</span></font><font face="Ubuntu"><span lang="fr-FR">
nous allons créer un conteneur avec Wordpress afin de créer </span></font><font face="Ubuntu"><span lang="fr-FR">le</span></font><font face="Ubuntu"><span lang="fr-FR">
site internet </span></font><font face="Ubuntu"><span lang="fr-FR">d’Obrador.</span></font></p>
<h2 class="western"><a name="__RefHeading___Toc249_1033052965"></a>1.<font face="Ubuntu"><span lang="fr-FR">Qu’est-ce
</span></font><font face="Ubuntu"><span lang="fr-FR">qu’un
conteneur </span></font><font face="Ubuntu"><span lang="fr-FR">?</span></font></h2>
<p><font face="Ubuntu"><span lang="fr-FR">Nous verrons</span></font><font face="Ubuntu"><span lang="fr-FR">
deux type</span></font><font face="Ubuntu"><span lang="fr-FR">s</span></font><font face="Ubuntu"><span lang="fr-FR">
de conteneurs, Proxmox (LXC) et Docker, </span></font><font face="Ubuntu"><span lang="fr-FR">il
y en a</span></font><font face="Ubuntu"><span lang="fr-FR"> plein
d’autres que nous ne verrons pas.</span></font></p>
<p><font face="Ubuntu"><span lang="fr-FR">Un conteneur ‘Proxmox’
permet d’</span></font><font face="Ubuntu"><span lang="fr-FR">éxécuter</span></font><font face="Ubuntu"><span lang="fr-FR">
un OS (Système d’exploitation) dans un OS déjà existant. C’est
comme un deuxième ordinateur qui n’a rien avoir avec le
premier.<br/>
Un conteneur ‘Docker’ c’est presque la même
chose mais on va pouvoir partager de</span></font><font face="Ubuntu"><span lang="fr-FR">s</span></font><font face="Ubuntu"><span lang="fr-FR">
dossiers et </span></font><font face="Ubuntu"><span lang="fr-FR">des
</span></font><font face="Ubuntu"><span lang="fr-FR">fichiers avec
l’OS qui contient le conteneur. </span></font><font face="Ubuntu"><span lang="fr-FR">Son
avantage est aussi que les conteneurs docker sont déjà installé</span></font><font face="Ubuntu"><span lang="fr-FR">s</span></font><font face="Ubuntu"><span lang="fr-FR">
avec des services comme Wordpress et que les mises à jours sont
extrêmement simples. </span></font>
</p>
<p lang="fr-FR"><font face="Ubuntu">Les conteneurs vont nous
permettre d’ajouter/gérer des services Web (et autres), facilement
sans que cela ne puisse casser les services qui sont déjà hébergés
sur le serveur.<br/>
De plus, les sauvegardes, restaurations et mise
à jours, sont bien plus faciles et sans risques.</font></p>
<h2 class="western"><a name="__RefHeading___Toc251_1033052965"></a>2.<font face="Ubuntu"><span lang="fr-FR">Installons
</span></font><font face="Ubuntu"><span lang="fr-FR">notre ‘Proxy’,
</span></font><font face="Ubuntu"><font size="5" style="font-size: 16pt"><span lang="fr-FR"><b>en</b></span></font></font><font face="Ubuntu"><font size="5" style="font-size: 16pt"><span lang="fr-FR"><b>
conteneur Proxmox</b></span></font></font><font face="Ubuntu"><span lang="fr-FR">.</span></font></h2>
<p lang="fr-FR"><font face="Ubuntu">Dans ce paragraphe nous allons
créer le conteneur Proxmox 101, afin de créer notre ‘Proxy’.</font></p>
<p lang="fr-FR"><font face="Ubuntu">Le Proxy permet de rediriger des
URL (de services Web) vers des ports du serveur.</font></p>
<ul>
	<li><p lang="fr-FR"><font face="Ubuntu">Via l’interface Web de
	Proxmox, ‘Créer un conteneur’.</font></p>
	<li><p lang="fr-FR"><font face="Ubuntu">CT ID&nbsp;: 101, mettre le
	‘Nom d’hôte’&nbsp;: ‘Proxy’, décocher ‘Conteneur non
	privilégié’, mettre un mot de passe, puis Suivant.</font></p>
	<li><p lang="fr-FR"><font face="Ubuntu">Choisir le Modèle ‘Debian
	12’, puis Suivant.</font></p>
	<li><p lang="fr-FR"><font face="Ubuntu">Laisser le disque dur par
	défaut, puis Suivant.</font></p>
	<li><p lang="fr-FR"><font face="Ubuntu">Laisser un cœur de
	Processeur, puis Suivant.</font></p>
	<li><p lang="fr-FR"><font face="Ubuntu">La mémoire aussi, puis
	Suivant.</font></p>
	<li><p lang="fr-FR"><font face="Ubuntu">Le réseau&nbsp;: Mettre
	‘Pont’ à ‘vmbr0’, IPv4/CIDR à ‘192.168.0.101/24’,
	‘Passerelle’ à ‘192.168.0.254’, puis Suivant.</font></p>
	<li><p lang="fr-FR"><font face="Ubuntu">Et tout accepter ce qui
	suit.</font></p>
</ul>
<p lang="fr-FR"><font face="Ubuntu">Voilà c’est fait, le conteneur
‘101 (Proxy)’ devrait apparaître sur la gauche de l’interface
Web de Proxmox. Vous pouvez cliquer dessus afin d’afficher le
Résumé du conteneur.</font></p>
<p lang="fr-FR"><font face="Ubuntu">On va lancer un terminal afin
d’installer et configurer notre proxy.</font></p>
<p lang="fr-FR"><br/>
<br/>

</p>
<div title="footer"><p align="right" style="margin-top: 0.5cm; margin-bottom: 0cm; line-height: 100%">
	Page <span style="background: #c0c0c0"><sdfield type=PAGE subtype=RANDOM format=PAGE>4</sdfield></span>/<span style="background: #c0c0c0"><sdfield type=DOCSTAT subtype=PAGE format=PAGE>4</sdfield></span></p>
</div>
</body>
</html>